<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ULTRA AI DEV PLATFORM</title>
<style>
body{background:#0f172a;color:white;font-family:Arial;padding:30px;max-width:1100px;margin:auto}
input,textarea,button,select{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:none}
input,textarea,select{background:#1e293b;color:white}
button{background:#ef4444;font-weight:bold;cursor:pointer}
pre{background:black;padding:20px;height:260px;overflow:auto}
</style>
</head>
<body>

<h2>üöÄ ULTRA AI DEV PLATFORM</h2>

<input id="username" placeholder="GitHub Username">
<input id="token" placeholder="GitHub PAT (repo + workflow + pages)">
<input id="repo" placeholder="Repository Name">
<input id="openrouter" placeholder="OpenRouter API Key">

<select id="mode">
  <option value="create">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</option>
  <option value="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª</option>
  <option value="test">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã</option>
</select>

<input id="filepath" placeholder="–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É (–¥–ª—è edit)">
<textarea id="description" placeholder="–û–ø–∏—à–∏ –∑–∞–¥–∞—á—É..."></textarea>

<button onclick="runUltra()">RUN ULTRA</button>
<pre id="log"></pre>

<script>

function log(t){document.getElementById("log").innerText+=t+"\n";}

async function github(path,method,body){
  return fetch(`https://api.github.com/repos/${username.value}/${repo.value}/${path}`,{
    method:method,
    headers:{
      "Authorization":"token "+token.value,
      "Content-Type":"application/json"
    },
    body: body ? JSON.stringify(body) : null
  });
}

async function createFile(path,content){
  await github(`contents/${path}`,"PUT",{
    message:"AI update "+path,
    content:btoa(unescape(encodeURIComponent(content)))
  });
}

async function updateFile(path,newContent){
  const file = await github(`contents/${path}`,"GET");
  const data = await file.json();

  await github(`contents/${path}`,"PUT",{
    message:"AI modify "+path,
    content:btoa(unescape(encodeURIComponent(newContent))),
    sha:data.sha
  });
}

async function aiRequest(prompt){
  const res = await fetch("https://openrouter.ai/api/v1/chat/completions",{
    method:"POST",
    headers:{
      "Authorization":"Bearer "+openrouter.value,
      "Content-Type":"application/json"
    },
    body:JSON.stringify({
      model:"openai/gpt-4o-mini",
      messages:[
        {role:"system",content:"–¢—ã senior fullstack developer. –í–æ–∑–≤—Ä–∞—â–∞–π —á–∏—Å—Ç—ã–π –∫–æ–¥ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π."},
        {role:"user",content:prompt}
      ]
    })
  });

  const data = await res.json();
  return data.choices[0].message.content;
}

async function runUltra(){

  if(mode.value==="create"){

    log("‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞...");

    const code = await aiRequest(description.value);

    await fetch("https://api.github.com/user/repos",{
      method:"POST",
      headers:{
        "Authorization":"token "+token.value,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        name:repo.value,
        private:false,
        auto_init:true
      })
    });

    await createFile("index.js",code);
    log("‚úì –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω");

  }

  if(mode.value==="edit"){

    log("‚Üí AI —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª...");

    const newCode = await aiRequest(
      "–í–æ—Ç –∑–∞–¥–∞—á–∞: "+description.value+
      "\\n–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª: "+filepath.value
    );

    await updateFile(filepath.value,newCode);
    log("‚úì –§–∞–π–ª –æ–±–Ω–æ–≤–ª—ë–Ω");

  }

  if(mode.value==="test"){

    log("‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤...");

    const tests = await aiRequest(
      "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π unit —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞"
    );

    await createFile("test.js",tests);
    log("‚úì –¢–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã");

  }

  log("üî• ULTRA MODE COMPLETE");

}

</script>
</body>
</html>
